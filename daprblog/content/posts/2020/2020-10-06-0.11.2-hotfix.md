---
date: "2020-10-06T09:00:00-07:00"
title: "Dapr v0.11.2 hotfix overview"
linkTitle: "Dapr v0.11.2 hotfix overview"
author: Yaron Schneider
type: blog
---

A few days ago we've [announced](https://blog.dapr.io/posts/2020/10/01/dapr-v0.11.0-is-now-available/) the availability of Dapr v0.11.0.

Shortly after the release, two critical issues were detected which have prompted us to release two hotfixes to address them. The release notes can be found in [hotfix v0.11.1](https://github.com/dapr/dapr/releases/tag/v0.11.1) and [hotfix 0.11.2](https://github.com/dapr/dapr/releases/tag/v0.11.2), and include information on how to install or upgrade to the latest version.

In this post, I'd like to walk give a detailed overview of both issues, their root cause, how they were discovered and fixed.
The two issues addressed are:

* **v0.11.1**: Dapr sidecar authentication issue when high availability mode is enabled ([Issue #2187](https://github.com/dapr/dapr/issues/2187))
* **v0.11.2**: Remote actor invocation timeout error on Kubernetes with mTLS enabled ([Issue #2195](https://github.com/dapr/dapr/issues/2195))

### v0.11.1 overview
[The issue](https://github.com/dapr/dapr/issues/2187) fixed in the 0.11.1 release contained a regression that caused the Dapr control plane services to not function when running in HA (High Availability) mode enabled.

The root cause was that multiple instances (3 in the case of HA mode) of the Sentry Certificate Authority would race to create new root certs.
Until the pods were restarted to load the certificate from the secret store, each instance would contain different root CAs and would issue different certificates to the Dapr control plane pods and the Dapr sidecars, which resulted in rejected connections.

The issue was fixed with [this PR](https://github.com/dapr/dapr/pull/2185).

In addition, an [issue was opened](https://github.com/dapr/dapr/issues/2188) to make sure that e2e tests run in HA mode in addition to a single pod setup.
The issue was closed with the merging of this [PR](https://github.com/dapr/dapr/pull/2189).

### v0.11.2 overview
[The issue](https://github.com/dapr/dapr/issues/2195) fixed in the 0.11.2 release had a bug that caused actors to not work on Kubernetes clusters with mTLS enabled. The root cause was the result of changes made to how Dapr uses server names when doing mutual authentication in sidecar to sidecar gRPC calls.

The server name format changed from `cluster.local` to `<app-id>.<namespace>.cluster.local`, and the actors runtime did not pass the namespace to the server name.
That led to an authentication error that was reported to the user as a gRPC timeout deadline exceeded error.

The issue was fixed with [this PR](https://github.com/dapr/dapr/pull/2196).

As an immediate step, we checked why our actor e2e tests did not catch this, as this was supposed to be covered in the test. 
Further investigation showed that our e2e test for actors did not use Kubernetes pod to pod invocation, which did not create a gRPC connection with the wrong server name.
An issue to fix the e2e test was [opened](https://github.com/dapr/dapr/issues/2197) and later [completed](https://github.com/dapr/dapr/pull/2199).


### Conclusion
Making sure we provide the community with high quality releases is a top priority for us, and as maintainers we aim to respond quickly to high priority issues that arise.
We invite the community to continue to contribute to Dapr by reporting and raising issues and code contributions across all repos.
